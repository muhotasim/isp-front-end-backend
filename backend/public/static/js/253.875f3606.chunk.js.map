{"version":3,"file":"static/js/253.875f3606.chunk.js","mappings":"kUAGMA,EAAS,OACFC,EAAQ,SAAH,GAEd,OAF2B,UAEpB,IAAIC,SAAQ,SAACC,EAAKC,GACrBC,EAAAA,GAAAA,IAAUC,EAAAA,EAAAA,SAAoBN,EAAQ,CAAEO,QAAS,CAAE,cAAiB,WAAYC,EAAAA,EAAAA,KAAY,eAAgB,sBAAwBC,MAAK,SAAAC,GACrIP,EAAIO,EACR,IAAGC,OAAM,SAAAC,GACLR,EAAIQ,EACR,GACJ,GACJ,EAEaC,EAAG,yCAAG,WAAOC,GAAQ,sFACjBT,EAAAA,GAAAA,IAAUC,EAAAA,EAAAA,SAAmBN,EAAQ,IAAIc,EAAU,CAC5DP,QAAS,CACL,cAAiB,WAAYC,EAAAA,EAAAA,KAC7B,eAAgB,sBAEtB,mFACL,gBAPe,sCASHO,EAAS,SAACD,GACnB,OAAO,IAAIZ,SAAQ,SAACC,EAAKC,GACrBC,EAAAA,GAAAA,OAAaC,EAAAA,EAAAA,SAAoBN,EAAS,IAAIc,EAAU,CACpDP,QAAS,CACL,cAAiB,WAAYC,EAAAA,EAAAA,KAC7B,eAAgB,sBAErBC,MAAK,SAAAC,GACJP,EAAIO,EACR,IAAGC,OAAM,SAAAC,GACLR,EAAIQ,EACR,GACJ,GACJ,E,iDC2GA,EA1IiB,SAACI,GAChB,OAA2BC,EAAAA,EAAAA,UAAS,IAAG,eAAhCC,EAAO,KAAEC,EAAO,KACvB,GAA8BF,EAAAA,EAAAA,WAAS,GAAM,eAA7BG,GAAF,KAAY,MAGpBC,IAFWC,EAAAA,EAAAA,MAEJ,yCAAG,2GACG,OADS,+BAAG,CAAC,EAC9BF,GAAW,GAAM,kBAEQnB,EAAM,CAAC,GAAG,KAAD,EAA1BS,EAAQ,OACNa,EAASb,EAATa,KACRC,EAAAA,GAAAA,QAAkB,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAME,QAAS,CAAEC,SAAU,YAAaC,MAAO,SAC7DR,EAAY,OAAJI,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKA,KAAKK,KAAI,SAACC,GAAC,MAAM,CAAEf,SAAUe,EAAGC,IAAK,GAAI,KAE5DV,GAAW,GAAO,mDAEZG,EAAI,4BAAc,QAAd,EAAG,KAAGb,gBAAQ,WAAd,EAAG,EAAaa,OAExBC,EAAAA,GAAAA,MAAYD,EAAKE,QAAS,CAAEC,SAAU,YAAaC,MAAO,SAC5DP,GAAW,GAAO,0DAErB,kBAfY,oCA4BPW,EAAM,yCAAG,WAAO9B,EAAOa,GAAQ,oFAClB,OAAjBM,GAAW,GAAM,kBAEQP,EAAIC,GAAU,KAAD,EAA9BJ,EAAQ,OACNa,EAASb,EAATa,KACRC,EAAAA,GAAAA,QAAkB,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAME,QAAS,CAAEC,SAAU,YAAaC,MAAO,UACzDK,EAAiBd,GACNjB,GAAO6B,IAAU,OAAJP,QAAI,IAAJA,OAAI,EAAJA,EAAMA,KAAKA,KACvCJ,EAAQa,GACRZ,GAAW,GAAO,mDAEZG,EAAI,4BAAc,QAAd,EAAG,KAAGb,gBAAQ,WAAd,EAAG,EAAaa,OAExBC,EAAAA,GAAAA,MAAYD,EAAKE,QAAS,CAAEC,SAAU,YAAaC,MAAO,SAC5DP,GAAW,GAAO,0DAErB,gBAhBW,wCAqBZ,OAHAa,EAAAA,EAAAA,YAAU,WACRZ,GACF,GAAG,KAED,iCACE,SAAC,IAAU,CAACa,UAAU,mBAAmBC,MAAM,SAC3B,IAAnBjB,EAAQkB,SACP,SAAC,IAAK,CACJC,MAAO,CAAEC,UAAW,SAAUC,SAAU,QACxCC,KAAK,OACLf,SACE,6BACE,SAAC,IAAK,CAACgB,KAAM,KAAM,uCAK3B,SAAC,IAAG,WACF,SAAC,IAAG,CAACC,KAAM,GAAG,UACZ,yBACGxB,EAAQU,KAAI,SAACe,EAAM1C,GAClB,OACE,+BACE,4BACE,iBAEE2C,QAAS,WACPb,EAAO9B,EAAO0C,EAAK7B,SACrB,EACAuB,MAAO,CACLQ,OAAQ,UACRC,MAAO,OACPC,QAAS,MACTC,WAAY,sBACZC,aAAc,MACdC,MAAO,QACPC,YAAa,OACbC,aAAc,QAEhBlB,UAAU,WAAU,UAEnBS,EAAK7B,UACN,SAAC,IAAM,CACLqB,MAAM,uBACNE,MAAO,CAAEgB,MAAO,SAChBb,KAAK,SACLC,KAAK,QACLG,QAAS,SAACU,GA5Ef,IAACC,EA6EMD,EAAEE,kBA7ERD,EA8EeZ,EAAK7B,SA7EpC2C,EAAAA,EAAAA,QAAc,CACZtB,MAAO,wCACPuB,KAAK,WAAD,8BAAE,2GACmB3C,EAAOwC,GAAI,KAAD,EAA3B7C,EAAQ,OACNa,EAASb,EAATa,KACRC,EAAAA,GAAAA,QAAkB,OAAJD,QAAI,IAAJA,OAAI,EAAJA,EAAME,QAAS,CAAEC,SAAU,YAAaC,MAAO,SAC7DN,IAAU,2CACX,kDALI,IA4Ea,EAAE,UAEF,2BACE,SAAC,IAAM,CAACoB,KAAM,WA5Bb,OAASxC,GAiCH,IAAZ0C,EAAKb,MACJ,UAAC,IAAI,YACH,SAAC,IAAM,CACLc,QAAS,WACP,IAAIZ,EAAiBd,EACrBc,EAAe/B,GAAO6B,IAAM,GAC5BX,GAAQ,OAAIa,GACd,EACAS,KAAK,QACLJ,MAAO,CAAEgB,MAAO,SAAU,UAE1B,SAAC,IAAO,OAEV,4BACE,oCACA,yBAAMV,EAAKb,WAdJ,YAAc7B,KApCnBA,IAyDhB,YAMZ,C,qBC1IA,IALiB,CACb0D,SAAU,gCACVC,KAAM,wB,uDCFH,IAAMpD,EAAW,WACpB,OAAOqD,aAAaC,QAAQ,QAChC,C","sources":["services/logs.service.js","components/page/settings/logs/LogsList.js","constants/app.constants.js","services/utils.js"],"sourcesContent":["import axios from 'axios'\r\nimport appConst from '../constants/app.constants'\r\nimport { getToken } from './utils'\r\nconst module = 'logs'\r\nexport const index = ({ }) => {\r\n\r\n    return new Promise((res, rej) => {\r\n        axios.get(appConst.apiRoute + module, { headers: { 'Authorization': 'Bearer ' + getToken(), 'Content-Type': 'application/json' } }).then(response => {\r\n            res(response);\r\n        }).catch(err => {\r\n            rej(err);\r\n        })\r\n    })\r\n}\r\n\r\nexport const get = async (filename) => {\r\n    return await axios.get(appConst.apiRoute +module+ '/'+filename, {\r\n        headers: {\r\n            'Authorization': 'Bearer ' + getToken(),\r\n            'Content-Type': 'application/json'\r\n        }\r\n    })\r\n}\r\n\r\nexport const remove = (filename) => {\r\n    return new Promise((res, rej) => {\r\n        axios.delete(appConst.apiRoute + module + '/'+filename, {\r\n            headers: {\r\n                'Authorization': 'Bearer ' + getToken(),\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }).then(response => {\r\n            res(response);\r\n        }).catch(err => {\r\n            rej(err);\r\n        })\r\n    })\r\n}","import { Button, Card, Col, Modal, PageHeader, Row, Alert } from \"antd\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { index, remove, get } from \"../../../../services/logs.service\";\r\nimport { Trash2, ArrowUp, Inbox } from \"react-feather\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nconst LogsList = (props) => {\r\n  const [logData, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const navicate = useNavigate();\r\n\r\n  const getData = async (query = {}) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await index({});\r\n      const { data } = response;\r\n      toast.success(data?.message, { position: \"top-right\", theme: \"dark\" });\r\n      setData(data?.data.data.map((d) => ({ filename: d, log: \"\" })));\r\n      debugger;\r\n      setLoading(false);\r\n    } catch (e) {\r\n      const data = e?.response?.data;\r\n      if (data)\r\n        toast.error(data.message, { position: \"top-right\", theme: \"dark\" });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const onDelete = (id) => {\r\n    Modal.confirm({\r\n      title: \"Are you sure you want to delete this?\",\r\n      onOk: async () => {\r\n        const response = await remove(id);\r\n        const { data } = response;\r\n        toast.success(data?.message, { position: \"top-right\", theme: \"dark\" });\r\n        getData();\r\n      },\r\n    });\r\n  };\r\n  const onView = async (index, filename) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await get(filename);\r\n      const { data } = response;\r\n      toast.success(data?.message, { position: \"top-right\", theme: \"dark\" });\r\n      let currentLogData = logData;\r\n      currentLogData[index].log = data?.data.data;\r\n      setData(currentLogData);\r\n      setLoading(false);\r\n    } catch (e) {\r\n      const data = e?.response?.data;\r\n      if (data)\r\n        toast.error(data.message, { position: \"top-right\", theme: \"dark\" });\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n  }, []);\r\n  return (\r\n    <>\r\n      <PageHeader className=\"site-page-header\" title=\"Logs\" />\r\n      {logData.length === 0 && (\r\n        <Alert\r\n          style={{ textAlign: \"center\", fontSize: \"18px\" }}\r\n          type=\"info\"\r\n          message={\r\n            <span>\r\n              <Inbox size={20} /> There is no avilable log file\r\n            </span>\r\n          }\r\n        />\r\n      )}\r\n      <Row>\r\n        <Col span={12}>\r\n          <div>\r\n            {logData.map((file, index) => {\r\n              return (\r\n                <>\r\n                  <div key={index}>\r\n                    <div\r\n                      key={\"log-\" + index}\r\n                      onClick={() => {\r\n                        onView(index, file.filename);\r\n                      }}\r\n                      style={{\r\n                        cursor: \"pointer\",\r\n                        width: \"100%\",\r\n                        padding: \"5px\",\r\n                        background: \"rgba(0, 0, 0, 0.85)\",\r\n                        borderRadius: \"3px\",\r\n                        color: \"white\",\r\n                        marginRight: \"10px\",\r\n                        marginBottom: \"15px\",\r\n                      }}\r\n                      className=\"log-file\"\r\n                    >\r\n                      {file.filename}\r\n                      <Button\r\n                        title=\"Remove this log file\"\r\n                        style={{ float: \"right\" }}\r\n                        type=\"danger\"\r\n                        size=\"small\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          onDelete(file.filename);\r\n                        }}\r\n                      >\r\n                        <span>\r\n                          <Trash2 size={18} />\r\n                        </span>\r\n                      </Button>\r\n                    </div>\r\n\r\n                    {file.log != \"\" && (\r\n                      <Card key={\"log-view-\" + index}>\r\n                        <Button\r\n                          onClick={() => {\r\n                            let currentLogData = logData;\r\n                            currentLogData[index].log = \"\";\r\n                            setData([...currentLogData]);\r\n                          }}\r\n                          size=\"small\"\r\n                          style={{ float: \"right\" }}\r\n                        >\r\n                          <ArrowUp />\r\n                        </Button>\r\n                        <div>\r\n                          <p>Details</p>\r\n                          <pre>{file.log}</pre>\r\n                        </div>\r\n                      </Card>\r\n                    )}\r\n                  </div>\r\n                </>\r\n              );\r\n            })}\r\n          </div>\r\n        </Col>\r\n      </Row>\r\n    </>\r\n  );\r\n};\r\nexport default LogsList;\r\n","const appConst = {\r\n    apiRoute: 'http://localhost:4000/api/v1/',\r\n    host: 'http://localhost:4000',\r\n}\r\n\r\nexport default appConst;","export const getToken = ()=>{\r\n    return localStorage.getItem('token')\r\n}\r\nexport const setToken = (token)=>{\r\n    return localStorage.setItem('token', token)\r\n}\r\n"],"names":["module","index","Promise","res","rej","axios","appConst","headers","getToken","then","response","catch","err","get","filename","remove","props","useState","logData","setData","setLoading","getData","useNavigate","data","toast","message","position","theme","map","d","log","onView","currentLogData","useEffect","className","title","length","style","textAlign","fontSize","type","size","span","file","onClick","cursor","width","padding","background","borderRadius","color","marginRight","marginBottom","float","e","id","stopPropagation","Modal","onOk","apiRoute","host","localStorage","getItem"],"sourceRoot":""}
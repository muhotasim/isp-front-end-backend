{"version":3,"file":"static/js/784.39a8f791.chunk.js","mappings":"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","sources":["components/page/files/FileList.js","components/utils/axios.exception-handaler.js","constants/app.constants.js","services/file.service.js","services/utils.js"],"sourcesContent":["import { Button, Modal, PageHeader, Table, Upload } from \"antd\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport { index, remove, create } from \"../../../services/file.service\";\r\nimport { Input } from \"antd\";\r\nimport { Trash2, Inbox, RefreshCcw } from \"react-feather\";\r\nimport axiosExeptionHandler from \"../../utils/axios.exception-handaler\";\r\nimport appConst from \"../../../constants/app.constants\";\r\nconst { Dragger } = Upload;\r\nconst { Search } = Input;\r\n\r\nconst FileList = ({ allowSelect = false }) => {\r\n  const [data, setData] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [perPage, setPerPage] = useState(10);\r\n  const [total, setTotal] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [searchVal, setSearchval] = useState(\"\");\r\n  const [uploading, setUploading] = useState();\r\n\r\n  const getData = async (query = {}) => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await index({ perPage, page, query });\r\n      const { data } = response;\r\n      setTotal(data?.data.count);\r\n      toast.info(data?.message, { position: \"top-right\", theme: \"dark\" });\r\n      setData(data?.data.data);\r\n      setLoading(false);\r\n    } catch (e) {\r\n      axiosExeptionHandler(e, () => setLoading(false));\r\n    }\r\n  };\r\n\r\n  const onSearch = () => {\r\n    getData({\r\n      type: searchVal,\r\n      name: searchVal,\r\n    });\r\n  };\r\n\r\n  const onDelete = (id) => {\r\n    Modal.confirm({\r\n      title: \"Are you sure you want to delete this?\",\r\n      onOk: async () => {\r\n        const response = await remove(id);\r\n        const { data } = response;\r\n        setTotal(data?.data.count);\r\n        toast.error(data?.message, { position: \"top-right\", theme: \"dark\" });\r\n        getData();\r\n      },\r\n    });\r\n  };\r\n\r\n  const props = {\r\n    multiple: true,\r\n    beforeUpload: async (file) => {\r\n      if (file && file.size > 2072576) {\r\n        toast.warning(\"File must be under 2 MB\", {\r\n          position: \"top-right\",\r\n          theme: \"dark\",\r\n        });\r\n        return;\r\n      }\r\n      setUploading(true);\r\n      try {\r\n        const response = await create({ file });\r\n\r\n        const { data } = response;\r\n        toast.success(data?.message, {\r\n          position: \"top-right\",\r\n          theme: \"dark\",\r\n        });\r\n        setUploading(false);\r\n        getData();\r\n      } catch (e) {\r\n        axiosExeptionHandler(e, () => setUploading(false));\r\n      }\r\n      return false;\r\n    },\r\n    onDrop(e) {\r\n      console.log(\"Dropped files\", e.dataTransfer.files);\r\n    },\r\n  };\r\n\r\n  const fileDataTable = [\r\n    allowSelect? {\r\n      title: \"Type\",\r\n      dataIndex: \"type\",\r\n      sorter: true,\r\n      key: \"type\",\r\n    }:{\r\n      title: \"Type\",\r\n      dataIndex: \"type\",\r\n      sorter: true,\r\n      key: \"type\",\r\n    },\r\n    {\r\n      title: \"Uri\",\r\n      dataIndex: \"\",\r\n      sorter: true,\r\n      key: \"uri\",\r\n      render: (record) => (\r\n        <a href={appConst.host + record.uri} target=\"_blank\">\r\n          {appConst.host + record.uri}\r\n        </a>\r\n      ),\r\n    },\r\n    {\r\n      title: \"Extension\",\r\n      dataIndex: \"ext\",\r\n      sorter: true,\r\n      key: \"ext\",\r\n    },\r\n    {\r\n      title: \"Image\",\r\n      dataIndex: \"\",\r\n      sorter: true,\r\n      key: \"location\",\r\n      render: (record) => {\r\n        let src = appConst.host + record.uri.split(\".\").join(\"128x128.\");\r\n        return (\r\n          <div>\r\n            <img style={{ maxWidth: \"80px\" }} src={src} />\r\n          </div>\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"Actions\",\r\n      dataIndex: \"\",\r\n      sorter: true,\r\n      width:\"90px\",\r\n      key: \"x\",\r\n      render: (record) => (\r\n        <span>\r\n          <Button\r\n            size=\"small\"\r\n            type=\"danger\"\r\n            onClick={() => {\r\n              onDelete(record.id);\r\n            }}\r\n          >\r\n            <Trash2 size={14} />\r\n          </Button>\r\n        </span>\r\n      ),\r\n    },\r\n  ];\r\n  useEffect(() => {\r\n    getData();\r\n  }, [perPage, page]);\r\n  return (\r\n    <>\r\n      <PageHeader className=\"site-page-header\" title=\"Files\" />\r\n      <div style={{ marginBottom: \"25px\" }}>\r\n        <Dragger {...props} disabled={uploading} showUploadList={false}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <Inbox />\r\n          </p>\r\n          <p className=\"ant-upload-text\">\r\n            Click or drag file to this area to upload\r\n          </p>\r\n          <p className=\"ant-upload-hint\">\r\n            Support for a single or bulk upload. Strictly prohibit from\r\n            uploading company data or other band files\r\n          </p>\r\n        </Dragger>\r\n      </div>\r\n      <div className=\"search-box animated fadeIn\">\r\n        <Search\r\n          placeholder=\"Search...\"\r\n          size=\"default\"\r\n          value={searchVal}\r\n          onChange={(e) => {\r\n            setSearchval(e.target.value);\r\n          }}\r\n          style={{ maxWidth: \"200px\", marginBottom: \"20px\" }}\r\n          onSearch={onSearch}\r\n        />\r\n        <Button\r\n          style={{ width: \"35px\", padding: \"0px\" }}\r\n          onClick={() => {\r\n            setSearchval(\"\");\r\n            getData();\r\n          }}\r\n        >\r\n          <RefreshCcw size={14} color=\"#949494\" />\r\n        </Button>\r\n      </div>\r\n      <Table\r\n        className=\"animated fadeIn\"\r\n        dataSource={data}\r\n        columns={fileDataTable}\r\n        loading={loading}\r\n        size=\"small\"\r\n        rowKey={(record) => record.id}\r\n        pagination={{\r\n          pageSize: perPage,\r\n          current: page,\r\n          total: total,\r\n          onShowSizeChange: (current, size) => {\r\n            setPerPage(size);\r\n          },\r\n          showSizeChanger: true,\r\n          pageSizeOptions: [10, 20, 50, 100],\r\n          onChange: (p) => {\r\n            setPage(p);\r\n          },\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n};\r\nexport default FileList;\r\n","import { toast } from \"react-toastify\";\r\n\r\nconst axiosExeptionHandler = (e, callback = null) => {\r\n  if (e.code == \"ERR_NETWORK\") {\r\n    toast.error(e.message, { position: \"top-right\", theme: \"dark\" });\r\n  } else {\r\n    const data = e?.response?.data;\r\n    if (data)\r\n      toast.error(data.message, { position: \"top-right\", theme: \"dark\" });\r\n  }\r\n  if (callback) callback();\r\n};\r\n\r\nexport default axiosExeptionHandler;\r\n","const appConst = {\r\n    apiRoute: 'http://localhost:4000/api/v1/',\r\n    host: 'http://localhost:4000',\r\n}\r\n\r\nexport default appConst;","import axios from 'axios'\r\nimport appConst from '../constants/app.constants'\r\nimport { getToken } from './utils'\r\nconst module = 'files'\r\nexport const index = ({ query = {}, perPage = 20, page = 1, getCount = 1 }) => {\r\n    let search = new URLSearchParams();\r\n    Object.keys(query).forEach(key => {\r\n        search.append(key, query[key])\r\n    })\r\n    search.append('perPage', perPage)\r\n    search.append('page', page)\r\n    search.append('getCount', getCount)\r\n    return new Promise((res, rej) => {\r\n        axios.get(appConst.apiRoute + module + '?' + search.toString(), { headers: { 'Authorization': 'Bearer ' + getToken(), 'Content-Type': 'application/json' } }).then(response => {\r\n            res(response);\r\n        }).catch(err => {\r\n            rej(err);\r\n        })\r\n    })\r\n}\r\nexport const create = async ({ file}) => {\r\n    const formData = new FormData()\r\n    formData.append('type', 'image')\r\n    formData.append('file', file)\r\n    return await axios.put(appConst.apiRoute + module, \r\n        formData, { \r\n        headers: {\r\n            'Authorization': 'Bearer ' + getToken(),\r\n            // 'Content-Type': 'application/json'\r\n        }\r\n     })\r\n}\r\nexport const remove = (id) => {\r\n    return new Promise((res, rej) => {\r\n        axios.delete(appConst.apiRoute + module + '/' + id, { \r\n            headers: { \r\n             'Authorization': 'Bearer ' + getToken(),\r\n             'Content-Type': 'application/json'\r\n             } }).then(response => {\r\n            res(response);\r\n        }).catch(err => {\r\n            rej(err);\r\n        })\r\n    })\r\n}\r\n","export const getToken = ()=>{\r\n    return localStorage.getItem('token')\r\n}\r\nexport const setToken = (token)=>{\r\n    return localStorage.setItem('token', token)\r\n}\r\n"],"names":["Dragger","Upload","Search","Input","allowSelect","useState","data","setData","loading","setLoading","perPage","setPerPage","total","setTotal","page","setPage","searchVal","setSearchval","uploading","setUploading","getData","query","index","response","count","toast","message","position","theme","axiosExeptionHandler","props","multiple","beforeUpload","file","size","create","onDrop","e","console","log","dataTransfer","files","fileDataTable","title","dataIndex","sorter","key","render","record","href","appConst","uri","target","src","split","join","style","maxWidth","width","type","onClick","id","Modal","onOk","remove","useEffect","className","marginBottom","disabled","showUploadList","placeholder","value","onChange","onSearch","name","padding","color","dataSource","columns","rowKey","pagination","pageSize","current","onShowSizeChange","showSizeChanger","pageSizeOptions","p","callback","code","apiRoute","host","module","getCount","search","URLSearchParams","Object","keys","forEach","append","Promise","res","rej","axios","toString","headers","getToken","then","catch","err","formData","FormData","localStorage","getItem"],"sourceRoot":""}
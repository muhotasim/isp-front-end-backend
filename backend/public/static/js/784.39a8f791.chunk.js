"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[784],{4784:function(e,t,n){n.r(t);var r=n(1413),a=n(4165),o=n(5861),i=n(9439),s=n(9553),u=n(5595),c=n(7309),d=n(8374),l=n(4950),p=n(2791),f=n(9085),h=n(7970),m=n(940),v=n(8965),g=n(8206),x=n(8130),Z=n(577),k=n(5570),y=n(184),j=s.Z.Dragger,w=m.Z.Search;t.default=function(e){e.allowSelect;var t=(0,p.useState)([]),n=(0,i.Z)(t,2),s=n[0],m=n[1],S=(0,p.useState)(!1),b=(0,i.Z)(S,2),z=b[0],C=b[1],A=(0,p.useState)(10),I=(0,i.Z)(A,2),P=I[0],R=I[1],N=(0,p.useState)(0),B=(0,i.Z)(N,2),L=B[0],O=B[1],U=(0,p.useState)(1),E=(0,i.Z)(U,2),T=E[0],D=E[1],F=(0,p.useState)(""),K=(0,i.Z)(F,2),W=K[0],q=K[1],_=(0,p.useState)(),M=(0,i.Z)(_,2),G=M[0],H=M[1],J=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,r,o=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},C(!0),e.prev=2,e.next=5,(0,h.Kz)({perPage:P,page:T,query:t});case 5:n=e.sent,r=n.data,O(null===r||void 0===r?void 0:r.data.count),f.Am.info(null===r||void 0===r?void 0:r.message,{position:"top-right",theme:"dark"}),m(null===r||void 0===r?void 0:r.data.data),C(!1),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),(0,Z.Z)(e.t0,(function(){return C(!1)}));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),Q={multiple:!0,beforeUpload:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.size>2072576)){e.next=3;break}return f.Am.warning("File must be under 2 MB",{position:"top-right",theme:"dark"}),e.abrupt("return");case 3:return H(!0),e.prev=4,e.next=7,(0,h.Ue)({file:t});case 7:n=e.sent,r=n.data,f.Am.success(null===r||void 0===r?void 0:r.message,{position:"top-right",theme:"dark"}),H(!1),J(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),(0,Z.Z)(e.t0,(function(){return H(!1)}));case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}(),onDrop:function(e){console.log("Dropped files",e.dataTransfer.files)}},V=[{title:"Type",dataIndex:"type",sorter:!0,key:"type"},{title:"Uri",dataIndex:"",sorter:!0,key:"uri",render:function(e){return(0,y.jsx)("a",{href:k.Z.host+e.uri,target:"_blank",children:k.Z.host+e.uri})}},{title:"Extension",dataIndex:"ext",sorter:!0,key:"ext"},{title:"Image",dataIndex:"",sorter:!0,key:"location",render:function(e){var t=k.Z.host+e.uri.split(".").join("128x128.");return(0,y.jsx)("div",{children:(0,y.jsx)("img",{style:{maxWidth:"80px"},src:t})})}},{title:"Actions",dataIndex:"",sorter:!0,width:"90px",key:"x",render:function(e){return(0,y.jsx)("span",{children:(0,y.jsx)(c.Z,{size:"small",type:"danger",onClick:function(){var t;t=e.id,u.Z.confirm({title:"Are you sure you want to delete this?",onOk:function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var n,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.Od)(t);case 2:n=e.sent,r=n.data,O(null===r||void 0===r?void 0:r.data.count),f.Am.error(null===r||void 0===r?void 0:r.message,{position:"top-right",theme:"dark"}),J();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()})},children:(0,y.jsx)(v.Z,{size:14})})})}}];return(0,p.useEffect)((function(){J()}),[P,T]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(d.Z,{className:"site-page-header",title:"Files"}),(0,y.jsx)("div",{style:{marginBottom:"25px"},children:(0,y.jsxs)(j,(0,r.Z)((0,r.Z)({},Q),{},{disabled:G,showUploadList:!1,children:[(0,y.jsx)("p",{className:"ant-upload-drag-icon",children:(0,y.jsx)(g.Z,{})}),(0,y.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,y.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibit from uploading company data or other band files"})]}))}),(0,y.jsxs)("div",{className:"search-box animated fadeIn",children:[(0,y.jsx)(w,{placeholder:"Search...",size:"default",value:W,onChange:function(e){q(e.target.value)},style:{maxWidth:"200px",marginBottom:"20px"},onSearch:function(){J({type:W,name:W})}}),(0,y.jsx)(c.Z,{style:{width:"35px",padding:"0px"},onClick:function(){q(""),J()},children:(0,y.jsx)(x.Z,{size:14,color:"#949494"})})]}),(0,y.jsx)(l.Z,{className:"animated fadeIn",dataSource:s,columns:V,loading:z,size:"small",rowKey:function(e){return e.id},pagination:{pageSize:P,current:T,total:L,onShowSizeChange:function(e,t){R(t)},showSizeChanger:!0,pageSizeOptions:[10,20,50,100],onChange:function(e){D(e)}}})]})}},577:function(e,t,n){var r=n(9085);t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("ERR_NETWORK"==e.code)r.Am.error(e.message,{position:"top-right",theme:"dark"});else{var n,a=null===e||void 0===e||null===(n=e.response)||void 0===n?void 0:n.data;a&&r.Am.error(a.message,{position:"top-right",theme:"dark"})}t&&t()}},5570:function(e,t){t.Z={apiRoute:"http://localhost:4000/api/v1/",host:"http://localhost:4000"}},7970:function(e,t,n){n.d(t,{Kz:function(){return c},Od:function(){return l},Ue:function(){return d}});var r=n(4165),a=n(5861),o=n(1044),i=n(5570),s=n(1070),u="files",c=function(e){var t=e.query,n=void 0===t?{}:t,r=e.perPage,a=void 0===r?20:r,c=e.page,d=void 0===c?1:c,l=e.getCount,p=void 0===l?1:l,f=new URLSearchParams;return Object.keys(n).forEach((function(e){f.append(e,n[e])})),f.append("perPage",a),f.append("page",d),f.append("getCount",p),new Promise((function(e,t){o.ZP.get(i.Z.apiRoute+u+"?"+f.toString(),{headers:{Authorization:"Bearer "+(0,s.L)(),"Content-Type":"application/json"}}).then((function(t){e(t)})).catch((function(e){t(e)}))}))},d=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,(a=new FormData).append("type","image"),a.append("file",n),e.next=6,o.ZP.put(i.Z.apiRoute+u,a,{headers:{Authorization:"Bearer "+(0,s.L)()}});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return new Promise((function(t,n){o.ZP.delete(i.Z.apiRoute+u+"/"+e,{headers:{Authorization:"Bearer "+(0,s.L)(),"Content-Type":"application/json"}}).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},1070:function(e,t,n){n.d(t,{L:function(){return r}});var r=function(){return localStorage.getItem("token")}}}]);
//# sourceMappingURL=784.39a8f791.chunk.js.map